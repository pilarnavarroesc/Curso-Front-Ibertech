<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="css/estilos.css">
    <style>
        div.movil{
            box-sizing:border-box;
            border: 1px solid black;
            height: 10px; width:10px;
            position: absolute;
            left:0px; top:0px
        }
        div.baldosa{
            box-sizing:border-box;
            height: 10px; width:10px;
            position: absolute;
            background-color: blue;
            left:0px; top:0px
        }
    </style>
    <script>
        var x =  0;
        var y =  0;
        function teclaPulsada(event) {
            var movil = document.querySelector("div.movil");
            var codigo = event.which || event.keyCode;
            if(codigo==37){
                x -= 10;
            } else if(codigo==39){
                x += 10;
            } else if(codigo==38){
                y -= 10;
            } else if(codigo==40){
                y += 10; 
            }
            movil.style.left = x + "px";
            movil.style.top = y + "px";
            document.querySelector("body").innerHTML += 
                "<div class='baldosa'></div>";
            var baldosas = document.querySelectorAll(
                "div.baldosa");
            var baldosa = baldosas[baldosas.length-1]    
            baldosa.style.left = movil.style.left;
            baldosa.style.top = movil.style.top; 
            comprobarPisar(baldosa);
        }
        function comprobarPisar(ultima){
            var baldosas = document.querySelectorAll(
                "div.baldosa");
            for (var i = 0; i < baldosas.length-1; i++) {
                    var bal = baldosas[i];
                if(bal.style.left==ultima.style.left &&
                    bal.style.top==ultima.style.top){
                    iniciarPartida();
                    break;
                }
            }
        }
        function iniciarPartida(){
            document.querySelector("body").innerHTML =
            '<div class="movil"></div>';
            x=0;
            y=0;
        }
    </script>
</head>
<body onkeydown="teclaPulsada(event);">
    <div class="movil">
        
    </div>
</body>
</html>